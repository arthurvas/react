import React, {Component} from 'react'
import {connect} from 'react-redux'
import {fetchUserById} from 'actions'

import {getUserById} from 'selectors/users'

class User extends Component {
    componentDidMount (){
        this.props.fetchUserById(
            this.props.params.id, 
            this.props.params.name
        )
    }
    renderContainer(){
        const {user} = this.props        
        return(
            <div className="thumbnail">
                <div className="row">
                    <div className="col-md-6">
                        <img 
                            src={user.avatar_url} 
                            alt={user.login}
                        />
                    </div>
                    <div className="col-md-6">
                        <h4>{user.login}</h4>
                        <h3>{user.html_url}</h3>
                    </div>
                </div>
            </div>
        )
    }
    render(){
        const {user} = this.props
        return(
            <div className="view-container">
                <div className="container">
                    <div className="row">
                        <div className="col-md-12">
                            {user && this.renderContainer()}
                        </div>
                    </div>
                </div>
            </div>
        )
    }
}

const mapStateToProps = state => ({
    user: getUserById(state, state.userPage.id)
})

const mapDispatchToProps = {
    fetchUserById
}

export default connect(mapStateToProps, mapDispatchToProps)(User)