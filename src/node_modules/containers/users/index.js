import React, {Component} from 'react'
import {connect} from 'react-redux'
import {fetchUsers} from 'actions'
import {getUsers} from 'selectors/users'
import {Link} from 'react-router'

class Users extends Component {
    componentDidMount(){
        this.props.fetchUsers()
    }
    renderUser(user, index){
        return(
            <div className="col-md-4 col-sm-12 col-lg-4 list-users" key={index}>
                <div className="thumbnail text-center">
                    <img className="img-thumbnail" 
                        src={user.avatar_url} 
                        alt={user.login}
                        width="100"
                    />
                    <div className="box">
                        <h4>
                            <Link to={`/users/${user.login}`}>
                                {user.login}
                            </Link>
                        </h4>
                    </div>
                </div>
                
            </div>
        )
    }
    render(){
        const {users} = this.props
        return(
            <div>
                <div className="users row">
                    {users.map((user, index) => this.renderUser(user,index))}
                </div>
            </div>
        )
    }
}

const mapStateToProps = state => ({
    users: getUsers(state)
})

const mapDispatchToProps = {
    fetchUsers
}
export default connect(mapStateToProps, mapDispatchToProps)(Users)